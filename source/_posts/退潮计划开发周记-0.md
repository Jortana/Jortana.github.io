---
title: 退潮计划开发周记 0
date: 2022-07-11 14:08:01
categories: 退潮计划
tags:
    - 退潮计划
    - JavaScript
    - React
    - Node.js
    - express
    - mongodb
    - mongoose
    - 英雄联盟
---

## 0 项目起源

事情是这样的，在几周之前，大学同学开始了以前常常进行的英雄联盟 5v5 活动，某一天，我晚上看着掌上英雄联盟看了很多数据，我和其中一个学长 HG 讨论起来打法、胜率、搭配之类的问题。后来一想，如果可以分析我们的对局数据，会不会发现一些有趣的结论或者帮助我们赛区提升整体水平，于是这个项目就开始了，目前只是做了数据和胜率的相关分析，从分析结果和游戏时的感性感受，大家很容易发现有一些人 **很影响游戏的胜负**，包括正面和负面，因此 HG 灵光乍现，将本项目成为 **退潮计划**。

## 1 当前进度

在想起来应该记录一下开发的进度时，退潮计划线上 1.0 版本已经上线了，功能包括 **查看重要数据** 和 **半自动化更新对局记录**。

重要数据目前每周都会变化，因为当前对局信息较少，每一周比赛之后，各个数据的变化可能都会很大，在做相关分析的时候，对胜率影响更大的因素也会随之变化，举例说明，开发的第一周只有 12 场对局记录，我们最后得出的结论是影响胜率的因素有：伤害转换率、小龙控制率、10-20分钟对位补刀差、KDA 等，而第二周因为打野表现太过出色，野区的影响就大幅上升，而对位补刀差、KDA 等因素就不再重要，随着对局记录的增加以及算法的选择不同，最后的重要数据应该趋于稳定。

### 1.1 数据收集

退潮计划目前是根据收集到的数据对胜率进行相关分析，分析到底哪些数据对对局的胜负影响更大，所以第一步就是收集数据，在网上查找有没有开放 api，我在几年前也找过相关的东西，印象中国服是没有这种接口的，没想到这么多年也确实没有，后来发现有一篇文章中提到了英雄联盟官网上是有详细的对局记录的，登录之后就可以通过接口获取对局的基本信息，也可以根据接口查找到对局的详细信息。

获取对局列表的接口长这样：`https://lol.sw.game.qq.com/lol/api/?c=Battle&a=matchList&areaId=1&accountId=${你的id}`

这里的 `accountId` 可以先在英雄联盟官网登录之后然后访问 `https://lol.ams.game.qq.com/lol/Go/dollclip/GetUserGame?actid=12&SearchType=LOLRole&areaid=1` 获取，这个接口会返回你登录的这个账户的信息，大概长这样：

```javascript
var J_GetUserGame = {"LOLRole":{"accountId":"你的accountId","result":"0","summonerLevel":"382","summonerName":"你的名字"},"iRet":0,"sMsg":"SUCCESS","version":"1.0"}
```

将你从这里获取的 accountId 填到前面获取对局列表的 url 里，就可以看到你的对局列表了，当然，这里是要保持登录状态的。

